<?xml version="1.0" encoding="utf-8" ?><html><head><title>Projeto PDSOFTWARE</title><link rel="stylesheet" href="dist/css/bootstrap.css"/><link rel="stylesheet" href="dist/css/fontawesome-free/css/all.css"/><link rel="stylesheet" href="dist/css/login.css"/><link rel="stylesheet" href="dist/css/layout.css"/><script src="node_modules/jquery/dist/jquery.min.js"></script><script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script><script src="node_modules/popper.js/dist/umd/popper.min.js"></script></head><body><div class="container d-flex align-items-center justify-content-center h-100"><div class="subcontainer p-4"><nav><div class="nav nav-tabs d-flex align-items-center justify-content-center" id="nav-tab" role="tablist"><a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home" aria-selected="true">Entrar</a><a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-profile" aria-selected="false">Cadastrar</a></div></nav><div class="tab-content" id="nav-tabContent"><div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab"><div class="login-form p-4"><div class="row"><div class="col-12">   <div class="form-group"><input class="form-control" type="email" id="login_email" aria-describedby="emailHelp" placeholder="Endereço de Email"/></div><div class="form-group"><input class="form-control" type="password" id="login_senha" aria-describedby="passHelp" placeholder="Senha de Acesso"/><small class="form-text text-muted" id="passHelp">É Administrador? Cadastre um novo usuário mudando de aba!</small></div><button class="btn btn-primary w-100" type="submit" onclick="login()">Acessar o Sistema</button></div></div></div></div><div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab"><div class="p-4" id="cad-form"><div class="form-row"><div class="form-group col-md-12"><input class="form-control" type="text" id="nome" placeholder="Nome Completo"/></div><div class="form-group col-md-6"><input class="form-control" type="text" id="cpf" placeholder="CPF (Somente digitos)"/></div><div class="form-group col-md-6">   <select class="custom-select"><option selected="selected" disabled="disabled">Selecione a Função</option><option value="1">Caixa</option><option value="2">Contador</option><option value="3">Estoque </option></select></div><div class="form-group col-md-6"><input class="form-control" type="number" id="sal" placeholder="Salário a Receber (R$)"/></div><div class="form-group col-md-6"><input class="form-control" type="text" id="user" placeholder="Nome de Usuário"/></div><div class="form-group col-md-12"><input class="form-control" type="email" id="email" placeholder="E-mail de usuário"/></div><div class="form-group col-md-6"><input class="form-control" type="password" id="senha" placeholder="Senha"/></div><div class="form-group col-md-6"><input class="form-control" type="password" id="conf-senha" placeholder="Repita a Senha"/></div><button class="btn btn-primary w-100" type="submit" onclick="submit();">Cadastrar Usuário</button></div></div></div></div></div><div class="modal fade" id="modal-cad-conf" tabindex="-1" role="dialog" aria-labelledby="modal-pag-conf-Label" aria-hidden="true"><div class="modal-dialog modal-dialog-centered" role="document"><div class="modal-content"><div class="modal-header d-flex justify-content-center border-0"><h5 class="modal-title text-success" id="modal-pag-conf-Label">Usuário Cadastrado com Sucesso        </h5></div><div class="modal-body"><p>É necessário agora realizar o login do sistema para acessar suas funcionálidades.</p></div><div class="modal-footer d-flex justify-content-center border-0"><button class="btn btn-sm btn-primary" type="button" data-dismiss="modal" onclick="location.reload();">OK</button></div></div></div></div><div class="modal fade" id="modal-cad-error" tabindex="-1" role="dialog" aria-labelledby="modal-pag-error-Label" aria-hidden="true"><div class="modal-dialog modal-dialog-centered" role="document"><div class="modal-content"><div class="modal-header d-flex justify-content-center border-0"><h5 class="modal-title text-danger" id="modal-pag-error-Label">Confirmação de Senha Incorreta</h5></div><div class="modal-body d-flex justify-content-center"><p>Verifique os dados e tente novamente.      </p></div><div class="modal-footer d-flex justify-content-center border-0"><button class="btn btn-sm btn-primary" type="button" data-dismiss="modal">OK</button></div></div></div></div><div class="modal fade" id="modal-login-error" tabindex="-1" role="dialog" aria-labelledby="modal-login-error-Label" aria-hidden="true"><div class="modal-dialog modal-dialog-centered" role="document"><div class="modal-content"><div class="modal-header d-flex justify-content-center border-0"><h5 class="modal-title text-danger" id="modal-login-error-Label">Usuário ou Senha Incorretos</h5></div><div class="modal-body d-flex justify-content-center"><p>Verifique os dados e tente novamente.      </p></div><div class="modal-footer d-flex justify-content-center border-0"><button class="btn btn-sm btn-primary" type="button" data-dismiss="modal">OK</button></div></div></div></div></div></body><script>function submit() {
    if($('#senha').val() == $('#conf-senha').val()){
        $.post('http://localhost:3000/funcionario', { 
                nome: $('#nome').val(),
                cpf: $('#cpf').val(),
                sal: $('#sal').val(),
                user: $('#user').val(),
                email: $('#email').val(),
                senha: $('#senha').val(),
                func: $(".custom-select option:selected").val()
            });
            $('#modal-cad-conf').modal('show');      
    }else{
            $('#modal-cad-error').modal('show');
    }
}

function login() {
    $.getJSON('http://localhost:3000/funcionario/'+$('#login_email').val(), function(data) {
        if($('#login_senha').val() == data[0].Senha){
            $.post('http://localhost:3000/usuario', { 
                nome: data[0].Nome,
                funcao: data[0].Funcao
            });
            window.location.href = "/FoodSoftware";
        }else{
            $('#modal-login-error').modal('show');
        }
    })
}</script></html>